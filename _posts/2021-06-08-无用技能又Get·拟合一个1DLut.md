##  【懒人系列】无用技能又Get·拟合一个1D Lut

原创 张来吃 [ 后期暗房小黄灯 ](javascript:void\(0\);)

**后期暗房小黄灯** ![]()

微信号 Post_spotlight

功能介绍 你想了解的技术细节可能在这里

__ __

__

收录于话题

众所周知，使用LUT的时候我们都知道有1D 3D之分，1D LUT用来转换“Gamma”完全098k的

  

再众所周知，LUT作为“查找表”超过了它的查找范围自然是无能为力的

  

一般而言，一个LUT可以“处理”0到1之间的值，如果特别指明（且软件明白你的声明），也可以是一个较大的范围

  

再一般而言，处理Linear这样的“Gamma”时，我们可能就没办法再这样操作了，毕竟对于 Linear
而言没有上下限之分，随随便便超过1也稀松平常。例如，如果直接用了达芬奇自带的 Linear to Gamma
2.4，那么输入的内容超过1的部分就会被裁掉；而对于视效而言，超过1的内容可太多了



那么问题就是，能不能“扩展”1D LUT的处理范围，使其不受“查找表”性质的限制？

  

要继续试着解决这一问题，我们首先明确一点，以下内容不包含类似胶片模拟的，是一个个测量出来离散的数据组成的3D
LUT；而是由数学函数构成，出于各种原因我们并不能直接拿到公式来用。

  

这类情况下，我们可以尝试**多项式拟合**，来满足计算超出一定输入范围的结果

  

**一些简要的步骤**

* * *

  

首先，要得到数据，直接打开.cube文件看：例如一个典型的12bit 1D
LUT，输入从最小值到最大值被分割为了4096份，每行分别对应一个输出值，这里将它们导入Mac自带的应用：Grapher

左下角点击+号，新建一个点集，导入由LUT中得到的数据

  

  

我们可以放大看到每一个点的分布  

  

  

要将这些离散的点，“归纳”为一个函数来，其实就是多项式拟合

在Grapher里拟合这4096个点非常简单，点击 **插值…** ，种类选择 **多项式** ，填入一个合适的阶数，点击 **插值** ，即可预览  

  

  

最后点击线型，你会得到一个看上去非常复杂的函数，调整它的阶数，合适的话你会得到一个非常贴近的结果

  

  *   *   * 
    慢着……既然是贴近，那么结果自然不可能与原始的转换一模一样，必然会有误差所以此时的问题就是，是否有一个合适的阶数，满足误差是否在可接受范围内

  

为了验证结果，我们可以将得到的公式写为DCTL，导入达芬奇比较画面的区别能否接受，如果很难看出区别，那么恭喜你，拟合的结果算是很理想啦

  

**我又不会写DCTL啊**

* * *

  

没关系，我也不咋会，**[还记得之前我们介绍DCTL的文章么**](http://mp.weixin.qq.com/s?__biz=MzI5NTc5MjI4
MQ==&mid=2247484230&idx=1&sn=dd3d4e3609639c7d13b506a48bdbaae7&chksm=ec4f78b0db
38f1a677d08c42d7219dcedd9d4511b63fab3738b9de85c506ce6420498b0207fe&scene=21#we
chat_redirect)。当时有提到一个大佬在Github上分享过很多DCTL，当然这位大佬也写了若干OFX，其中一个就是提供数学运算，你可以填入公式，
以求快速地达到效果，当然执行的效率自然有限

  

**那么3D ****LUT****呢？**

* * *

  

在Grapher里想看看3D LUT是什么亚子也很简单，具体思路大家动动脑筋就可以了，操作非常简单

不过仅限于看而已，至于为什么不可以继续用这样的方法…可以打电话问问数学老师

  

* * *

  

懒人必备系列旨在帮助大家减少重复机械操作

操作可能简单但思路并不简单噢

长按二维码关注公众号查看更多干货

如果觉得有用

欢迎分享到你的朋友圈

或者点击下方喜欢作者

  

![]()

张来吃

![赞赏二维码]() **微信扫一扫赞赏作者** 赞赏

已喜欢，[对作者说句悄悄话](javascript:;)

取消__

#### 发送给作者

发送

最多40字，当前共字

 人赞赏

上一页 [1](javascript:;)/3 下一页

长按二维码向我转账

